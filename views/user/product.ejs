<%- include('../partials/header.ejs') %>
<!-- ***** Products Area Starts ***** -->
<section class="section pt-9" id="products">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-heading">
                    <h2>Our Latest Products</h2>
                    <span>Check out all of our products.</span>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <% products.forEach(product=> { %>

            <div class="col-lg-4">
                <div class="item">
                    <div class="thumb">
                        <div class="hover-content">
                            <ul>
                                <li><a href="/product-details/<%= product._id %>"><i class="fa fa-eye"></i></a>
                                </li>
                                <li style="background-color: white;width: 50px;height: 50px;display:
                                            inline-block; text-align: center;line-height: 50px;">
                                    <button data-product-id="<%= product._id %>" id="addtocart"
                                        onclick="addToWishlist(this)"><i class="fa fa-heart"></i>
                                    </button>
                                </li>
                                <li style="background-color: white;width: 50px;height: 50px;display:
                                            inline-block; text-align: center;line-height: 50px;">
                                    <button data-product-id="<%= product._id %>" id="addtocart"
                                        onclick="addToCart(this)"><i class="fa fa-shopping-cart"></i></button>
                                    </>
                                </li>
                            </ul>
                        </div>

                        <img src="/files/<%= product.img1 %>" alt="" class="z-10  ">

                        <% if ( product.stock===0) { %>
                        <div class="absolute inset-0 flex  items-center justify-center text-red-600 ">
                            <div class="bg-slate-100 bg-opacity-50 w-100 text-center font-semibold">This product is
                                out of
                                stock
                            </div>
                        </div>
                        <% } %>

                        <!-- <img src=" files/<%= product.img1 %>" alt=""> -->
                    </div>
                    <div class="down-content">
                        <h4>
                            <%= product.product_name.split(' ').slice(0, 3).join(' ') %>
                        </h4>
                        <span class="price">MRP:
                            <del>
                                ₹<%= product.actual_price %>
                            </del>
                            &nbsp;
                            ₹<%= product.selling_price %>
                        </span>
                        <ul class="stars">
                            <li><i class="fa fa-star"></i></li>
                            <li><i class="fa fa-star"></i></li>
                            <li><i class="fa fa-star"></i></li>
                            <li><i class="fa fa-star"></i></li>
                            <li><i class="fa fa-star"></i></li>
                        </ul>
                    </div>
                </div>
            </div>


            <% }) %>




            <div class="col-lg-12">
                <div class="pagination">
                    <ul>
                        <li>
                            <a href="#">1</a>
                        </li>
                        <li class="active">
                            <a href="#">2</a>
                        </li>
                        <li>
                            <a href="#">3</a>
                        </li>
                        <li>
                            <a href="#">4</a>
                        </li>
                        <li>
                            <a href="#">></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ***** Products Area Ends ***** -->


<script>
    const addToWishlist = async (element) => {
        const id = element.getAttribute('data-product-id')
        console.log("id", id);

        try {
            const res = await axios.post('/add-to-wishlist', {
                id
            })
            console.log("res.data", res.data);

        } catch (error) {

        }
    }
</script>